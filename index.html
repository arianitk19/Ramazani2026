<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ramazani 2026 | Vaktia Digjitale</title>

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#020617">
    <link rel="apple-touch-icon" href="logo.svg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #fbbf24; --dark-bg: #020617; }
        body { background: var(--dark-bg); color: #f8fafc; font-family: 'Space Grotesk', sans-serif; overflow-x: hidden; }
        .vaktia-glass { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(25px); border: 1px solid rgba(251, 191, 36, 0.1); }
        #burger-menu { transition: all 0.6s cubic-bezier(0.85, 0, 0.15, 1); clip-path: circle(0% at 100% 0%); }
        #burger-menu.active { clip-path: circle(150% at 100% 0%); }
        .line { transition: all 0.4s ease; height: 2px; width: 24px; background-color: var(--gold); display: block; margin: 6px 0; }
        .active-btn .line-1 { transform: translateY(8px) rotate(45deg); }
        .active-btn .line-2 { opacity: 0; }
        .active-btn .line-3 { transform: translateY(-8px) rotate(-45deg); }
        .shkelqimi { background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.15), transparent); animation: move 4s infinite linear; }
        @keyframes move { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
        <div class="absolute top-[-10%] right-[-10%] w-96 h-96 bg-emerald-600/10 blur-[120px] rounded-full"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-amber-600/10 blur-[120px] rounded-full"></div>
    </div>

    <button onclick="toggleMenu()" id="menu-btn" class="fixed top-8 right-6 z-[100] p-4 vaktia-glass rounded-2xl">
        <span class="line line-1"></span><span class="line line-2"></span><span class="line line-3"></span>
    </button>

    <nav id="burger-menu" class="fixed inset-0 bg-slate-950 z-[90] flex flex-col items-center justify-center space-y-12">
        <a href="#" onclick="toggleMenu()" class="text-5xl font-bold text-amber-500 italic">KREU</a>
        <a href="ushqimishpirtit.html" class="text-3xl font-light uppercase tracking-widest">Lutjet</a>
    </nav>

    <header class="w-full pt-20 px-6 text-center animate__animated animate__fadeIn">
        <div class="inline-flex items-center space-x-2 border border-amber-500/20 bg-amber-500/5 px-4 py-1.5 rounded-full mb-6">
            <span class="relative flex h-2 w-2"><span class="animate-ping absolute h-full w-full rounded-full bg-amber-400 opacity-75"></span><span class="relative h-2 w-2 bg-amber-500 rounded-full"></span></span>
            <span class="text-[10px] font-bold tracking-[0.4em] text-amber-500 uppercase">Vaktia Zyrtare 2026</span>
        </div>
        <h1 class="text-6xl font-light tracking-tighter leading-none">RAMAZANI <br><span class="font-black text-amber-500 italic">2026</span></h1>
    </header>

    <main class="w-full max-w-md px-6 mt-12 space-y-8 pb-20">
        <section class="vaktia-glass rounded-[3rem] p-10 text-center relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-[1px] shkelqimi"></div>
            <p class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-8">Deri nÃ« fillimin e muajit</p>
            <div id="timer" class="flex justify-between items-center">
                <div class="flex flex-col"><span id="days" class="text-4xl font-bold">--</span><span class="text-[9px] opacity-40 uppercase">DitÃ«</span></div>
                <div class="flex flex-col"><span id="hours" class="text-4xl font-bold">--</span><span class="text-[9px] opacity-40 uppercase">OrÃ«</span></div>
                <div class="flex flex-col"><span id="minutes" class="text-4xl font-bold">--</span><span class="text-[9px] opacity-40 uppercase">Min</span></div>
                <div class="flex flex-col"><span id="seconds" class="text-4xl font-bold text-amber-500">--</span><span class="text-[9px] opacity-40 uppercase">Sek</span></div>
            </div>
        </section>

        <section id="loc-box" class="vaktia-glass rounded-[2.5rem] p-8 text-center">
            <button id="activate-btn" onclick="getUserLocation()" class="bg-amber-500 text-black px-8 py-5 rounded-[2rem] font-black uppercase tracking-widest active:scale-95 transition-all">
                PÃ«rcakto Vendndodhjen
            </button>
            
            <div id="times-display" class="hidden animate__animated animate__fadeIn">
                <h3 id="detected-city" class="text-3xl font-bold text-white mb-8 italic uppercase tracking-tighter">Duke kÃ«rkuar...</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white/[0.03] p-6 rounded-[2.2rem]">
                        <p class="text-[10px] text-gray-500 uppercase mb-2">Imsaku</p>
                        <p id="imsaku-val" class="text-3xl font-bold">--:--</p>
                    </div>
                    <div class="bg-amber-500/[0.05] p-6 rounded-[2.2rem] border border-amber-500/20">
                        <p class="text-[10px] text-amber-500 uppercase mb-2">Iftari</p>
                        <p id="iftari-val" class="text-3xl font-bold text-amber-500">--:--</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        function toggleMenu() {
            document.getElementById('burger-menu').classList.toggle('active');
            document.getElementById('menu-btn').classList.toggle('active-btn');
        }

        async function getUserLocation() {
            const btn = document.getElementById('activate-btn');
            const display = document.getElementById('times-display');
            btn.innerText = "Duke verifikuar...";

            navigator.geolocation.getCurrentPosition(async (pos) => {
                const { latitude, longitude } = pos.coords;
                try {
                    const geo = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`);
                    const geoData = await geo.json();
                    const city = geoData.address.city || geoData.address.town || "KosovÃ«";

                    const pReq = await fetch(`https://api.aladhan.com/v1/timings?latitude=${latitude}&longitude=${longitude}&method=13`);
                    const pData = await pReq.json();

                    btn.classList.add('hidden');
                    display.classList.remove('hidden');
                    document.getElementById('detected-city').innerText = city;
                    document.getElementById('imsaku-val').innerText = pData.data.timings.Fajr;
                    const iftari = pData.data.timings.Maghrib;
                    document.getElementById('iftari-val').innerText = iftari;

                    // RuajmÃ« nÃ« memorje
                    localStorage.setItem('lastIftari', iftari);
                    initNotifications();
                } catch (e) { btn.innerText = "Gabim nÃ« lidhje"; }
            }, () => btn.innerText = "Aktivizo GPS");
        }

        // Countdown Logjika
        const target = new Date("February 18, 2026 05:00:00").getTime();
        setInterval(() => {
            const diff = target - new Date().getTime();
            if (diff < 0) return;
            document.getElementById('days').innerText = Math.floor(diff / 86400000);
            document.getElementById('hours').innerText = Math.floor((diff % 86400000) / 3600000);
            document.getElementById('minutes').innerText = Math.floor((diff % 3600000) / 60000);
            document.getElementById('seconds').innerText = Math.floor((diff % 60000) / 1000);
        }, 1000);

        // Njoftimet
        async function initNotifications() {
            if ('serviceWorker' in navigator) {
                const reg = await navigator.serviceWorker.register('sw.js');
                const permission = await Notification.requestPermission();
                
                if (permission === 'granted') {
                    const iftari = localStorage.getItem('lastIftari');
                    setInterval(() => {
                        const tani = new Date();
                        const oraAktuale = tani.getHours().toString().padStart(2, '0') + ":" + tani.getMinutes().toString().padStart(2, '0');
                        if (oraAktuale === iftari) {
                            reg.showNotification("Koha e Iftarit! ðŸŒ™", {
                                body: "Allahu ju pranoftÃ« agjÃ«rimin.",
                                icon: "logo.svg",
                                tag: "iftari-notif"
                            });
                        }
                    }, 60000);
                }
            }
        }
    </script>
</body>
</html>
