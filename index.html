<!DOCTYPE html>

<html lang="sq">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Ramazani 2026 | Vaktia Digjitale</title>



    <link rel="manifest" href="manifest.json">

    <meta name="theme-color" content="#020617">



<link rel="apple-touch-icon" href="https://img.icons8.com/fluency-systems-filled/512/D4AF37/crescent-moon.png">

    <link rel="apple-touch-icon" sizes="152x152" href="logo.svg">

    <link rel="apple-touch-icon" sizes="180x180" href="logo.svg">

    <link rel="apple-touch-icon" sizes="167x167" href="logo.svg">

    

    <meta name="apple-mobile-web-app-capable" content="yes">

    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="apple-mobile-web-app-title" content="Vaktia">



    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">

    

    <style>

        :root { --gold: #fbbf24; --dark-bg: #020617; }

        body { background: var(--dark-bg); color: #f8fafc; font-family: 'Space Grotesk', sans-serif; overflow-x: hidden; }

        

        .vaktia-glass {

            background: rgba(255, 255, 255, 0.02);

            backdrop-filter: blur(25px);

            border: 1px solid rgba(251, 191, 36, 0.1);

            box-shadow: inset 0 0 20px rgba(251, 191, 36, 0.02);

        }



        #burger-menu { transition: all 0.6s cubic-bezier(0.85, 0, 0.15, 1); clip-path: circle(0% at 100% 0%); }

        #burger-menu.active { clip-path: circle(150% at 100% 0%); }

        

        .line { transition: all 0.4s ease; height: 2px; width: 24px; background-color: var(--gold); display: block; margin: 6px 0; border-radius: 2px; }

        .active-btn .line-1 { transform: translateY(8px) rotate(45deg); }

        .active-btn .line-2 { opacity: 0; transform: translateX(-20px); }

        .active-btn .line-3 { transform: translateY(-8px) rotate(-45deg); }



        .neon-gold { text-shadow: 0 0 20px rgba(251, 191, 36, 0.3); }

        .shkelqimi {

            background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.15), transparent);

            animation: move 4s infinite linear;

        }

        @keyframes move { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

    </style>

</head>

<body class="min-h-screen flex flex-col items-center">



    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">

        <div class="absolute top-[-10%] right-[-10%] w-96 h-96 bg-emerald-600/10 blur-[120px] rounded-full"></div>

        <div class="absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-amber-600/10 blur-[120px] rounded-full"></div>

    </div>



    <button onclick="toggleMenu()" id="menu-btn" class="fixed top-8 right-6 z-[100] p-4 vaktia-glass rounded-2xl border border-amber-500/10 active:scale-90 transition-transform">

        <span class="line line-1"></span>

        <span class="line line-2"></span>

        <span class="line line-3"></span>

    </button>



    <nav id="burger-menu" class="fixed inset-0 bg-slate-950 z-[90] flex flex-col items-center justify-center space-y-12">

        <a href="index.html" onclick="toggleMenu()" class="text-5xl font-bold text-amber-500 italic hover:tracking-widest transition-all">KREU</a>

        <a href="ushqimishpirtit.html" class="text-3xl font-light hover:text-amber-500 transition-colors uppercase tracking-widest">Lutjet</a>

        <a href="settings.html" class="text-3xl font-light hover:text-amber-500 transition-colors uppercase tracking-widest">Cilësimet</a>

        <div class="absolute bottom-12 opacity-30 text-[10px] tracking-[0.8em] uppercase">Vaktia 2026</div>

    </nav>



    <header class="w-full pt-20 px-6 text-center animate__animated animate__fadeIn">

        <div class="inline-flex items-center space-x-2 border border-amber-500/20 bg-amber-500/5 px-4 py-1.5 rounded-full mb-6">

            <span class="relative flex h-2 w-2"><span class="animate-ping absolute h-full w-full rounded-full bg-amber-400 opacity-75"></span><span class="relative h-2 w-2 bg-amber-500 rounded-full"></span></span>

            <span class="text-[10px] font-bold tracking-[0.4em] text-amber-500 uppercase">Vaktia Zyrtare</span>

        </div>

        <h1 class="text-6xl font-light tracking-tighter leading-none">RAMAZANI <br><span class="font-black text-amber-500 neon-gold italic">2026</span></h1>

    </header>



    <main class="w-full max-w-md px-6 mt-12 space-y-8 pb-20">

        

        <section class="vaktia-glass rounded-[3rem] p-10 text-center relative overflow-hidden group">

            <div class="absolute top-0 left-0 w-full h-[1px] shkelqimi"></div>

            <p class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-8">Deri në fillimin e muajit të shenjtë</p>

            <div id="timer" class="flex justify-between items-center px-2">

                <div class="flex flex-col"><span id="days" class="text-4xl font-bold tracking-tighter">--</span><span class="text-[9px] opacity-40 uppercase font-bold mt-1">Ditë</span></div>

                <div class="h-10 w-[1px] bg-white/10"></div>

                <div class="flex flex-col"><span id="hours" class="text-4xl font-bold tracking-tighter">--</span><span class="text-[9px] opacity-40 uppercase font-bold mt-1">Orë</span></div>

                <div class="h-10 w-[1px] bg-white/10"></div>

                <div class="flex flex-col"><span id="minutes" class="text-4xl font-bold tracking-tighter">--</span><span class="text-[9px] opacity-40 uppercase font-bold mt-1">Min</span></div>

                <div class="h-10 w-[1px] bg-white/10"></div>

                <div class="flex flex-col"><span id="seconds" class="text-4xl font-bold text-amber-500 tracking-tighter">--</span><span class="text-[9px] opacity-40 uppercase font-bold mt-1">Sek</span></div>

            </div>

        </section>



        <section class="animate__animated animate__fadeInUp" style="animation-delay: 0.3s">

            <div id="loc-box" class="vaktia-glass rounded-[2.5rem] p-8 text-center transition-all duration-700">

                <button id="activate-btn" onclick="getUserLocation()" class="group bg-amber-500 text-black px-8 py-5 rounded-[2rem] font-black uppercase tracking-widest hover:shadow-[0_20px_40px_rgba(251,191,36,0.2)] transition-all flex items-center justify-center mx-auto active:scale-95">

                    <svg class="w-5 h-5 mr-3 group-hover:animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>

                    Përcakto Vendndodhjen

                </button>

                

                <div id="times-display" class="hidden">

                    <p class="text-[10px] text-gray-500 uppercase font-bold mb-1">Vendi i Detektuar</p>

                    <h3 id="detected-city" class="text-3xl font-bold text-white mb-8 tracking-tighter italic">Pritni...</h3>

                    

                    <div class="grid grid-cols-2 gap-4">

                        <div class="bg-white/[0.03] p-6 rounded-[2.2rem] border-t border-white/5">

                            <p class="text-[10px] text-gray-500 uppercase font-bold mb-2 tracking-widest">Imsaku</p>

                            <p id="imsaku-val" class="text-3xl font-bold font-mono tracking-tighter">--:--</p>

                        </div>

                        <div class="bg-amber-500/[0.05] p-6 rounded-[2.2rem] border-t border-amber-500/10">

                            <p class="text-[10px] text-amber-500 uppercase font-bold mb-2 tracking-widest">Iftari</p>

                            <p id="iftari-val" class="text-3xl font-bold font-mono tracking-tighter text-amber-500">--:--</p>

                        </div>

                    </div>

                </div>

            </div>

        </section>


<section class="animate__animated animate__fadeInUp" style="animation-delay: 0.5s">
    <button onclick="openQuranModal()" class="w-full vaktia-glass rounded-[2.5rem] p-5 border border-white/5 flex items-center justify-between group active:scale-95 transition-all shadow-lg shadow-amber-500/5">
        <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-2xl bg-amber-500/10 flex items-center justify-center text-amber-500 group-hover:bg-amber-500 group-hover:text-black transition-all duration-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
            </div>
            <div class="text-left">
                <p class="text-[10px] text-amber-500 font-bold uppercase tracking-[0.2em]">Libri i Shenjtë</p>
                <p class="text-sm text-white font-medium">Lexo Kuranin & Dëgjo</p>
            </div>
        </div>
        <div class="h-8 w-8 rounded-full bg-white/5 flex items-center justify-center">
            <svg class="w-4 h-4 text-gray-500 group-hover:text-amber-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
        </div>
    </button>
</section>

<div id="quran-modal" class="fixed inset-0 z-[100] hidden flex items-end sm:items-center justify-center p-0 sm:p-6 transition-all duration-500">
    <div class="absolute inset-0 bg-black/90 backdrop-blur-xl" onclick="closeQuranModal()"></div>
    
    <div class="relative w-full max-w-2xl bg-[#020617] h-[92vh] sm:h-[85vh] rounded-t-[3rem] sm:rounded-[3rem] border-t border-white/10 overflow-hidden flex flex-col animate__animated animate__slideInUp animate__faster">
        
        <div class="p-6 border-b border-white/5 bg-white/[0.02] flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-1 h-8 bg-amber-500 rounded-full"></div>
                <div>
                    <h3 class="text-white font-bold tracking-[0.2em] uppercase text-[10px]">Al-Quran Al-Kareem</h3>
                    <p class="text-[11px] text-amber-500 uppercase mt-0.5 font-black tracking-widest" id="surah-title">Zgjidhni Suren</p>
                </div>
            </div>
            <button onclick="closeQuranModal()" class="h-10 w-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-gray-400 hover:text-white transition-all active:scale-90">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>

        <div class="p-4 border-b border-white/5 flex gap-3 overflow-x-auto no-scrollbar bg-black/40">
            <button onclick="loadSurah(1, 'El-Fatiha')" class="flex-none px-6 py-3 rounded-2xl bg-amber-500/10 border border-amber-500/20 text-amber-500 text-[10px] font-black uppercase tracking-widest hover:bg-amber-500 hover:text-black transition-all">Fatiha</button>
            <button onclick="loadSurah(2, 'El-Bekare')" class="flex-none px-6 py-3 rounded-2xl bg-white/5 border border-white/10 text-gray-400 text-[10px] font-black uppercase tracking-widest hover:border-amber-500/50 transition-all">Bekare</button>
            <button onclick="loadSurah(36, 'Jasin')" class="flex-none px-6 py-3 rounded-2xl bg-white/5 border border-white/10 text-gray-400 text-[10px] font-black uppercase tracking-widest hover:border-amber-500/50 transition-all">Jasin</button>
            <button onclick="loadSurah(67, 'El-Mulk')" class="flex-none px-6 py-3 rounded-2xl bg-white/5 border border-white/10 text-gray-400 text-[10px] font-black uppercase tracking-widest hover:border-amber-500/50 transition-all">Mulk</button>
            <button onclick="loadSurah(18, 'El-Kehf')" class="flex-none px-6 py-3 rounded-2xl bg-white/5 border border-white/10 text-gray-400 text-[10px] font-black uppercase tracking-widest hover:border-amber-500/50 transition-all">Kehf</button>
            <button onclick="loadSurah(55, 'Er-Rrahman')" class="flex-none px-6 py-3 rounded-2xl bg-white/5 border border-white/10 text-gray-400 text-[10px] font-black uppercase tracking-widest hover:border-amber-500/50 transition-all">Rrahman</button>
        </div>

        <div id="surah-content" class="flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth no-scrollbar">
            <div class="text-center py-32 opacity-20">
                <svg class="w-16 h-16 mx-auto mb-4 text-amber-500" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/></svg>
                <p class="text-[10px] uppercase tracking-[0.5em] text-white font-bold">Zgjidhni një sure për lexim</p>
            </div>
        </div>

        <div id="audio-container" class="hidden p-6 bg-slate-950/90 border-t border-white/10 backdrop-blur-3xl">
            <div class="max-w-md mx-auto">
                <audio id="quran-audio" controls class="w-full h-10 filter invert brightness-200 opacity-60 hover:opacity-100 transition-opacity"></audio>
                <div class="flex justify-center mt-3">
                    <span class="text-[8px] text-amber-500/60 font-black uppercase tracking-[0.4em]">Recitimi: Mishary Rashid Alafasy</span>
                </div>
            </div>
        </div>
    </div>
</div>






        <section class="mt-10 animate__animated animate__fadeInUp" style="animation-delay: 0.6s">
    <div class="flex items-center justify-between mb-5 px-2">
        <h2 class="text-white text-[10px] font-black uppercase tracking-[0.3em]">Udhëzuesi i Ramazanit</h2>
        <span class="h-[1px] flex-1 bg-white/5 ml-4"></span>
    </div>

    <div class="grid grid-cols-2 gap-4">
        <button onclick="openInfoModal('rregullat')" class="vaktia-glass p-5 rounded-[2.5rem] border border-white/5 flex flex-col items-start gap-3 active:scale-95 transition-all text-left group">
            <div class="h-10 w-10 rounded-2xl bg-emerald-500/10 flex items-center justify-center text-emerald-500 group-hover:bg-emerald-500 group-hover:text-black transition-all">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            </div>
            <div>
                <p class="text-[10px] text-white font-bold uppercase tracking-widest">Rregullat</p>
                <p class="text-[9px] text-gray-500 mt-1 uppercase tracking-tighter">Çka e prish agjërimin?</p>
            </div>
        </button>

        <button onclick="openInfoModal('dobite')" class="vaktia-glass p-5 rounded-[2.5rem] border border-white/5 flex flex-col items-start gap-3 active:scale-95 transition-all text-left group">
            <div class="h-10 w-10 rounded-2xl bg-blue-500/10 flex items-center justify-center text-blue-500 group-hover:bg-blue-500 group-hover:text-white transition-all">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
            </div>
            <div>
                <p class="text-[10px] text-white font-bold uppercase tracking-widest">Shëndeti</p>
                <p class="text-[9px] text-gray-500 mt-1 uppercase tracking-tighter">Dobitë e agjërimit</p>
            </div>
        </button>

        <button onclick="openInfoModal('kadri')" class="vaktia-glass p-5 rounded-[2.5rem] border border-white/5 flex flex-col items-start gap-3 active:scale-95 transition-all text-left group">
            <div class="h-10 w-10 rounded-2xl bg-amber-500/10 flex items-center justify-center text-amber-500 group-hover:bg-amber-500 group-hover:text-black transition-all">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
            </div>
            <div>
                <p class="text-[10px] text-white font-bold uppercase tracking-widest">Adhurimi</p>
                <p class="text-[9px] text-gray-500 mt-1 uppercase tracking-tighter">Nata e Kadrit</p>
            </div>
        </button>

        <button onclick="openInfoModal('sadakaja')" class="vaktia-glass p-5 rounded-[2.5rem] border border-white/5 flex flex-col items-start gap-3 active:scale-95 transition-all text-left group">
            <div class="h-10 w-10 rounded-2xl bg-purple-500/10 flex items-center justify-center text-purple-500 group-hover:bg-purple-500 group-hover:text-white transition-all">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
            </div>
            <div>
                <p class="text-[10px] text-white font-bold uppercase tracking-widest">Lëmosha</p>
                <p class="text-[9px] text-gray-500 mt-1 uppercase tracking-tighter">Zekati & Fitri</p>
            </div>
        </button>
    </div>
</section>

<div id="info-modal" class="fixed inset-0 z-[110] hidden flex items-center justify-center p-4 sm:p-6 transition-all duration-500">
    <div class="absolute inset-0 bg-black/95 backdrop-blur-2xl" onclick="closeInfoModal()"></div>
    <div class="relative w-full max-w-lg bg-[#050505] rounded-[3rem] border border-white/10 overflow-hidden animate__animated animate__zoomIn animate__faster">
        <div class="p-8">
            <div id="info-icon-container" class="h-16 w-16 rounded-[1.5rem] flex items-center justify-center mb-6">
                </div>
            <h3 id="info-title" class="text-2xl text-white font-bold mb-4 tracking-tight"></h3>
            <div id="info-body" class="text-gray-400 text-sm leading-relaxed space-y-4 font-light">
                </div>
            <button onclick="closeInfoModal()" class="w-full mt-8 py-4 bg-white/5 border border-white/10 rounded-2xl text-white text-[10px] font-bold uppercase tracking-[0.2em] active:scale-95 transition-all">Mbyll Udhëzuesin</button>
        </div>
    </div>
</div>

        


        

        <section class="grid grid-cols-2 gap-4 animate__animated animate__fadeInUp" style="animation-delay: 0.6s">

            <div class="vaktia-glass p-6 rounded-[2rem] text-center border-l-2 border-blue-500/30">

                <p class="text-[9px] text-gray-500 uppercase font-bold mb-1">Sezona 2026</p>

                <p class="font-bold text-blue-400 tracking-tight">Dimër / Pranverë</p>

            </div>

            <div class="vaktia-glass p-6 rounded-[2rem] text-center border-l-2 border-emerald-500/30">

                <p class="text-[9px] text-gray-500 uppercase font-bold mb-1">Kalendari Hixhri</p>

                <p class="font-bold tracking-tight">1447 h.</p>

            </div>

        </section>



    </main>

<script>
    // 1. LOGJIKA E MENU-SË
    function toggleMenu() {
        const menu = document.getElementById('burger-menu');
        const btn = document.getElementById('menu-btn');
        menu.classList.toggle('active');
        btn.classList.toggle('active-btn');
        document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : 'auto';
    }

    // Variabël globale për të ruajtur kohën e Iftarit për njoftimet
    let globalIftariTime = ""; 

    // 2. LOGJIKA E LOKACIONIT (GPS Real)
    async function getUserLocation() {
        const btn = document.getElementById('activate-btn');
        const display = document.getElementById('times-display');
        const cityLabel = document.getElementById('detected-city');
        
        btn.innerHTML = "Duke verifikuar...";
        
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const { latitude, longitude } = pos.coords;
                try {
                    // Marrim emrin e qytetit përmes koordinatave
                    const geo = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`);
                    const geoData = await geo.json();
                    const city = geoData.address.city || geoData.address.town || geoData.address.village || "Kosovë";

                    // Marrim kohët nga Aladhan API (Metoda 13 = BIK)
                    const pReq = await fetch(`https://api.aladhan.com/v1/timings?latitude=${latitude}&longitude=${longitude}&method=13`);
                    const pData = await pReq.json();

                    // Ruajmë kohën e iftarit globalisht për njoftimin
                    globalIftariTime = pData.data.timings.Maghrib;

                    btn.classList.add('animate__animated', 'animate__fadeOutDown');
                    setTimeout(() => {
                        btn.classList.add('hidden');
                        display.classList.remove('hidden');
                        display.classList.add('animate__animated', 'animate__fadeInUp');
                        cityLabel.innerText = city.toUpperCase();
                        document.getElementById('imsaku-val').innerText = pData.data.timings.Fajr;
                        document.getElementById('iftari-val').innerText = pData.data.timings.Maghrib;
                    }, 500);
                } catch (e) { 
                    btn.innerHTML = "Gabim në API"; 
                }
            }, () => btn.innerHTML = "Aktivizo GPS");
        }
    }

    // --- NDRIDHJA ME SETTINGS (Auto-load) ---
    window.addEventListener('load', async () => {
        const savedSettings = JSON.parse(localStorage.getItem('vaktiaSettings'));
        if (savedSettings && savedSettings.city) {
            const btn = document.getElementById('activate-btn');
            btn.innerHTML = `Ngarkimi: ${savedSettings.city}...`;
            
            try {
                const res = await fetch(`https://api.aladhan.com/v1/timingsByCity?city=${savedSettings.city}&country=Kosovo&method=13`);
                const data = await res.json();
                
                globalIftariTime = data.data.timings.Maghrib;
                
                btn.classList.add('hidden');
                document.getElementById('times-display').classList.remove('hidden');
                document.getElementById('detected-city').innerText = savedSettings.city.toUpperCase();
                document.getElementById('imsaku-val').innerText = data.data.timings.Fajr;
                document.getElementById('iftari-val').innerText = data.data.timings.Maghrib;
            } catch(e) {
                console.log("Gabim gjatë ngarkimit të qytetit të ruajtur.");
            }
        }
    });

    // 3. LOGJIKA E COUNTDOWN-IT (19 Shkurt 2026)
    const target = new Date("February 19, 2026 04:49:00").getTime();
    setInterval(() => {
        const diff = target - new Date().getTime();
        if (diff < 0) return;
        document.getElementById('days').innerText = Math.floor(diff / 86400000);
        document.getElementById('hours').innerText = Math.floor((diff % 86400000) / 3600000);
        document.getElementById('minutes').innerText = Math.floor((diff % 3600000) / 60000);
        document.getElementById('seconds').innerText = Math.floor((diff % 60000) / 1000);
    }, 1000);

    // 4. SERVICE WORKER DHE NJOFTIMET
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js').then(reg => {
                console.log('Service Worker u regjistrua!');
                
                if (Notification.permission === 'default') {
                    setTimeout(() => {
                        Notification.requestPermission().then(perm => {
                            if (perm === 'granted') console.log('Njoftimet u lejuan!');
                        });
                    }, 3000);
                }
            });
        });
    }

    // 5. KONTROLLI I IFTARIT (Çdo 60 sekonda)
    setInterval(() => {
        if (!globalIftariTime) return; 

        const tani = new Date();
        const oraAktuale = tani.getHours().toString().padStart(2, '0') + ":" + 
                           tani.getMinutes().toString().padStart(2, '0');
        
        if (oraAktuale === globalIftariTime) {
            if (Notification.permission === 'granted') {
                navigator.serviceWorker.ready.then(registration => {
                    registration.showNotification("Koha e Iftarit!", {
                        body: "Allahu ju pranoftë agjërimin. Mund të hapni iftarin.",
                        icon: "logo.svg",
                        vibrate: [200, 100, 200]
                    });
                });
            }
        }
    }, 60000);


// --- LOGJIKA E KURANIT ---

// Funksioni për hapjen e dritares (Modal)
function openQuranModal() {
    const modal = document.getElementById('quran-modal');
    modal.classList.remove('hidden');
    modal.classList.add('flex');
    document.body.style.overflow = 'hidden'; // Bllokon lëvizjen e faqes mbrapa
}

// Funksioni për mbylljen e dritares
function closeQuranModal() {
    const modal = document.getElementById('quran-modal');
    const audio = document.getElementById('quran-audio');
    
    modal.classList.add('hidden');
    modal.classList.remove('flex');
    document.body.style.overflow = 'auto'; // Kthen lëvizjen e faqes
    audio.pause(); // Ndalon muzikën kur mbyll dritaren
}

// Funksioni kryesor për ngarkimin e Sures (Tekst + Përkthim + Audio)
async function loadSurah(id, name) {
    const content = document.getElementById('surah-content');
    const title = document.getElementById('surah-title');
    const audioContainer = document.getElementById('audio-container');
    const audioElement = document.getElementById('quran-audio');

    // Vizualizimi i ngarkimit
    title.innerText = `Duke hapur: ${name}...`;
    content.innerHTML = `
        <div class="flex flex-col items-center justify-center py-24">
            <div class="relative">
                <div class="h-12 w-12 border-2 border-amber-500/20 rounded-full"></div>
                <div class="absolute top-0 h-12 w-12 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"></div>
            </div>
            <p class="text-[10px] text-amber-500 uppercase tracking-[0.4em] mt-6 font-bold animate-pulse">Bismillah...</p>
        </div>
    `;

    try {
        // Fetch paralel për shpejtësi maksimale
        const [arRes, sqRes] = await Promise.all([
            fetch(`https://api.alquran.cloud/v1/surah/${id}`),
            fetch(`https://api.alquran.cloud/v1/surah/${id}/sq.ahmeti`)
        ]);

        const arData = await arRes.json();
        const sqData = await sqRes.json();
        
        title.innerText = `SURETU ${name.toUpperCase()}`;
        content.innerHTML = ""; 

        // Ndërtimi i ajetit me stilin Glassmorphism
        arData.data.ayahs.forEach((ayah, index) => {
            const sqText = sqData.data.ayahs[index].text;
            
            content.innerHTML += `
                <div class="vaktia-glass rounded-[2.5rem] p-8 mb-6 border border-white/5 animate__animated animate__fadeInUp">
                    <p class="text-right text-3xl leading-[4.5rem] font-serif text-white mb-8 drop-shadow-2xl" dir="rtl">
                        ${ayah.text}
                    </p>
                    
                    <div class="flex items-center gap-6 mb-8 opacity-20">
                        <div class="h-[0.5px] flex-1 bg-gradient-to-r from-transparent via-amber-500 to-transparent"></div>
                        <div class="h-2 w-2 rounded-full bg-amber-500 rotate-45"></div>
                        <span class="text-amber-500 text-[10px] font-black tracking-tighter">${ayah.numberInSurah}</span>
                        <div class="h-2 w-2 rounded-full bg-amber-500 rotate-45"></div>
                        <div class="h-[0.5px] flex-1 bg-gradient-to-r from-transparent via-amber-500 to-transparent"></div>
                    </div>

                    <p class="text-[14px] text-gray-300 font-light leading-relaxed tracking-wide italic text-center sm:text-left">
                        ${sqText}
                    </p>
                </div>
            `;
        });

        // Kontrolli i Audios
        audioElement.src = `https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${id}.mp3`;
        audioContainer.classList.remove('hidden');
        audioContainer.classList.add('animate__slideInUp');
        
        // Auto-scroll në fillim me efekt smooth
        content.scrollTo({ top: 0, behavior: 'smooth' });

    } catch (error) {
        content.innerHTML = `
            <div class="text-center py-20 bg-red-500/5 rounded-[3rem] border border-red-500/10 mx-4">
                <p class="text-red-500 text-[10px] font-black uppercase tracking-widest">Lidhja dështoi</p>
                <p class="text-gray-500 text-[10px] mt-2 italic px-8">Ju lutem provoni përsëri pas pak.</p>
            </div>
        `;
    }
}




// --- LOGJIKA E SEKTORIT "MESO PER RAMAZANIN" ---

const ramadanData = {
    rregullat: {
        title: "Rregullat e Agjërimit",
        icon: '<svg class="w-8 h-8 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',
        bg: "bg-emerald-500/10",
        text: `
            <p>• <b>Nijeti:</b> Agjërimi fillon me vendosjen e qëllimit në zemër para agimit.</p>
            <p>• <b>Çka e prish:</b> Ushqimi, pija dhe marrëdhëniet gjatë kohës së agjërimit.</p>
            <p>• <b>Çka nuk e prish:</b> Larja e dhëmbëve (pa e gëlltitur ujin), përdorimi i parfumit, ose harresa gjatë ngrënies.</p>
            <p>• <b>Kompensimi:</b> Personat e sëmurë ose udhëtarët mund t'i kompensojnë ditët pas Ramazanit.</p>
        `
    },
    dobite: {
        title: "Dobitë e Agjërimit",
        icon: '<svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>',
        bg: "bg-blue-500/10",
        text: `
            <p>• <b>Autofagjia:</b> Pas 12 orësh agjërimi, trupi fillon të pastrojë qelizat e dëmtuara.</p>
            <p>• <b>Detoksifikimi:</b> Sistemi tretës pushon, duke i dhënë mundësi mëlçisë të nxjerrë helmet jashtë.</p>
            <p>• <b>Përqendrimi:</b> Agjërimi rrit prodhimin e proteinave që mbrojnë trurin dhe rrisin fokusin.</p>
            <p>• <b>Zemra:</b> Ndihmon në uljen e tensionit të gjakut dhe kolesterolit të keq.</p>
        `
    },
    kadri: {
        title: "Nata e Kadrit",
        icon: '<svg class="w-8 h-8 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>',
        bg: "bg-amber-500/10",
        text: `
            <p>• <b>Vlera:</b> Kjo natë është më e vlefshme se 1000 muaj (rreth 83 vite adhurim).</p>
            <p>• <b>Kur është:</b> Kërkohet në netët teke të 10-ditëshit të fundit të Ramazanit.</p>
            <p>• <b>Adhurimi:</b> Rekomandohet leximi i Kuranit, lutjet e sinqerta dhe falja e namazit të natës.</p>
            <p>• <b>Duaja:</b> "O Allah, Ti je Falës, e dëshiron faljen, andaj më fal mua."</p>
        `
    },
    sadakaja: {
        title: "Zekati dhe Fitri",
        icon: '<svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>',
        bg: "bg-purple-500/10",
        text: `
            <p>• <b>Zekat-ul-Fitr:</b> Eshtë obligim për çdo musliman që ka mundësi, për të pastruar agjërimin dhe ndihmuar të varfrit për festën e Bajramit.</p>
            <p>• <b>Koha:</b> Duhet të jepet para faljes së namazit të Bajramit.</p>
            <p>• <b>Zekati:</b> Shumë njerëz zgjedhin Ramazanin për të dhënë 2.5% të pasurisë së tyre vjetore për bamirësi.</p>
        `
    }
};

function openInfoModal(key) {
    const data = ramadanData[key];
    const modal = document.getElementById('info-modal');
    const iconContainer = document.getElementById('info-icon-container');
    
    document.getElementById('info-title').innerText = data.title;
    document.getElementById('info-body').innerHTML = data.text;
    
    iconContainer.innerHTML = data.icon;
    iconContainer.className = `h-16 w-16 rounded-[1.5rem] flex items-center justify-center mb-6 ${data.bg}`;
    
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
}

function closeInfoModal() {
    document.getElementById('info-modal').classList.add('hidden');
    document.body.style.overflow = 'auto';
}


    
    
</script>
    
</body>

</html>






